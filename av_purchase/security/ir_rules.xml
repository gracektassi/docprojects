<?xml version='1.0' encoding='utf-8'?>
<odoo>
    <data noupdate="1">
        <!-- Assigning access rights to specific user groups for the main Purchase menu -->
        <record id="purchase.menu_purchase_root" model="ir.ui.menu">
            <field name="groups_id"
             eval="[(6,0,[ref('purchase.group_purchase_user'),ref('purchase.group_purchase_manager'),ref('av_purchase.av_purchase_cp'),ref('av_purchase.av_purchase_hod')])]"/>
        </record>
        <!-- CP Rule: Can see only POs they created -->
        <record id="rule_av_purchase_cp" model="ir.rule">
            <field name="name">CP: Can see only own POs</field>
            <field name="model_id" ref="purchase.model_purchase_order"/>
            <field name="domain_force">[('create_uid', '=', user.id)]</field>
            <field name="groups" eval="[(4, ref('av_purchase_cp'))]"/>
        </record>
        <!-- HOD Rule: Can see only POs linked to their department -->
        <record id="rule_av_purchase_hod" model="ir.rule">
            <field name="name">HOD: Can see only POs in their department</field>
            <field name="model_id" ref="purchase.model_purchase_order"/>
            <field name="domain_force">[('department_id.manager_id.user_id', '=', user.id)]</field>
            <field name="groups" eval="[(4, ref('av_purchase_hod'))]"/>
        </record>
    </data>
</odoo>